/*! For license information please see duckdb-browser-coi.pthread.worker.20fc82844b3153821b0a.js.LICENSE.txt */
"use strict";(()=>{var e,t,r,n,a=Object.create,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,l=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,c=(e=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(e,{get:(e,t)=>("undefined"!=typeof require?require:e)[t]}):e)((function(e){if("undefined"!=typeof require)return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')})),f=(e,t)=>function(){return t||(0,e[i(e)[0]])((t={exports:{}}).exports,t),t.exports},d=(e,t,r)=>(r=null!=e?a(l(e)):{},((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of i(t))u.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)),h=f({"(disabled):worker_threads"(){}}),_=f({"(disabled):fs"(){}}),p=f({"(disabled):path"(){}}),b=f({"(disabled):perf_hooks"(){}}),g=f({"(disabled):os"(){}}),m=f({"src/bindings/duckdb-coi.js"(e,t){var r,n=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(r=r||__filename),function(e={}){function t(){return S.buffer!=B.buffer&&Y(),B}function n(){return S.buffer!=B.buffer&&Y(),x}function a(){return S.buffer!=B.buffer&&Y(),W}function o(){return S.buffer!=B.buffer&&Y(),j}function s(){return S.buffer!=B.buffer&&Y(),q}function i(){return S.buffer!=B.buffer&&Y(),K}var l,u,f=e;f.ready=new Promise(((e,t)=>{l=e,u=t}));var d,m,y=Object.assign({},f),w="./this.program",v=(e,t)=>{throw t},A="object"==typeof window,k="function"==typeof importScripts,E="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,T=f.ENVIRONMENT_IS_PTHREAD||!1,U="";function M(e){return f.locateFile?f.locateFile(e,U):U+e}if(E){var D=_(),F=p();let e;U=k?F.dirname(U)+"/":__dirname+"/",d=(e,t)=>(e=de(e)?new URL(e):F.normalize(e),D.readFileSync(e,t?void 0:"utf8")),m=e=>{var t=d(e,!0);return t.buffer||(t=new Uint8Array(t)),t},!f.thisProgram&&process.argv.length>1&&(w=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),v=(e,t)=>{throw process.exitCode=e,t},f.inspect=()=>"[Emscripten Module object]";try{e=h()}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}global.Worker=e.Worker}else(A||k)&&(k?U=self.location.href:"undefined"!=typeof document&&document.currentScript&&(U=document.currentScript.src),r&&(U=r),U=0!==U.indexOf("blob:")?U.substr(0,U.replace(/[?#].*/,"").lastIndexOf("/")+1):"",E||(d=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},k&&(m=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})));E&&"undefined"==typeof performance&&(global.performance=b().performance);var R=console.log.bind(console),H=console.error.bind(console);E&&(R=(...e)=>D.writeSync(1,e.join(" ")+"\n"),H=(...e)=>D.writeSync(2,e.join(" ")+"\n"));var I,S,N,P=f.print||R,C=f.printErr||H;Object.assign(f,y),y=null,f.arguments&&f.arguments,f.thisProgram&&(w=f.thisProgram),f.quit&&(v=f.quit),f.wasmBinary&&(I=f.wasmBinary),"object"!=typeof WebAssembly&&ie("no native wasm support detected");var O,B,x,W,L,j,q,K,z=!1;function G(e,t){e||ie(t)}function Y(){var e=S.buffer;f.HEAP8=B=new Int8Array(e),f.HEAP16=W=new Int16Array(e),f.HEAPU8=x=new Uint8Array(e),f.HEAPU16=L=new Uint16Array(e),f.HEAP32=j=new Int32Array(e),f.HEAPU32=q=new Uint32Array(e),f.HEAPF32=new Float32Array(e),f.HEAPF64=K=new Float64Array(e)}var V=f.INITIAL_MEMORY||16777216;if(T)S=f.wasmMemory;else if(f.wasmMemory)S=f.wasmMemory;else if(!((S=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw C("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),E&&C("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Y(),V=S.buffer.byteLength;var J=[],X=[],Z=[],$=[],Q=!1;function ee(){Q=!0,T||Se(X)}function te(e){J.unshift(e)}var re=0,ne=null,ae=null;function oe(e){var t;re++,null==(t=f.monitorRunDependencies)||t.call(f,re)}function se(e){var t;if(re--,null==(t=f.monitorRunDependencies)||t.call(f,re),0==re&&(null!==ne&&(clearInterval(ne),ne=null),ae)){var r=ae;ae=null,r()}}function ie(e){var t;null==(t=f.onAbort)||t.call(f,e),C(e="Aborted("+e+")"),z=!0,O=1,e+=". Build with -sASSERTIONS for more info.",Q&&___trap();var r=new WebAssembly.RuntimeError(e);throw u(r),r}var le,ue,ce,fe=e=>e.startsWith("data:application/octet-stream;base64,"),de=e=>e.startsWith("file://");function he(e){if(e==le&&I)return new Uint8Array(I);if(m)return m(e);throw"both async and sync fetching of the wasm failed"}function _e(e,t,r){return function(e){return I||!A&&!k||"function"!=typeof fetch?Promise.resolve().then((()=>he(e))):fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((()=>he(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(r,(e=>{C("failed to asynchronously prepare wasm: ".concat(e)),ie(e)}))}function pe(e){this.name="ExitStatus",this.message="Program terminated with exit(".concat(e,")"),this.status=e}fe(le="./duckdb-coi.wasm")||(le=M(le));var be=e=>{e.terminate(),e.onmessage=e=>{}},ge=e=>{var t=Ie.pthreads[e];Ie.returnWorkerToPool(t)},me=(e,t)=>(n().fill(0,e,e+t),e),ye=e=>{var t=Ie.getNewWorker();if(!t)return 6;Ie.runningWorkers.push(t),Ie.pthreads[e.pthread_ptr]=t,t.pthread_ptr=e.pthread_ptr;var r={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return E&&t.unref(),t.postMessage(r,e.transferList),0},we=0,ve=()=>Oe||we>0,Ae="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,ke=(e,t,r)=>{for(var n=(t>>>=0)+r,a=t;e[a]&&!(a>=n);)++a;if(a-t>16&&e.buffer&&Ae)return Ae.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,a):e.subarray(t,a));for(var o="";t<a;){var s=e[t++];if(128&s){var i=63&e[t++];if(192!=(224&s)){var l=63&e[t++];if((s=224==(240&s)?(15&s)<<12|i<<6|l:(7&s)<<18|i<<12|l<<6|63&e[t++])<65536)o+=String.fromCharCode(s);else{var u=s-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&s)<<6|i)}else o+=String.fromCharCode(s)}return o},Ee=(e,t)=>(e>>>=0)?ke(n(),e,t):"",Te={varargs:void 0,get(){var e=o()[+Te.varargs>>>2>>>0];return Te.varargs+=4,e},getp:()=>Te.get(),getStr:e=>Ee(e)},Ue=(e,t)=>t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,Me=function(e,t){var r,n,a,o=arguments.length-2,s=arguments;return r=()=>{for(var r=o,n=cr(8*r),a=n>>>3,l=0;l<o;l++){var u=s[2+l];i()[a+l>>>0]=u}return rr(e,r,n,t)},n=lr(),a=r(),ur(n),a};function De(e){var t;if(T)return Me(0,1,e);O=e,ve()||(Ie.terminateAllThreads(),null==(t=f.onExit)||t.call(f,e),z=!0),v(e,new pe(e))}var Fe=(e,t)=>{if(O=e,T)throw Ne(e),"unwind";De(e)},Re=Fe,He=e=>{if(e instanceof pe||"unwind"==e)return O;v(1,e)},Ie={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init(){T?Ie.initWorker():Ie.initMainThread()},initMainThread(){for(var e=4;e--;)Ie.allocateUnusedWorker();te((()=>{oe(),Ie.loadWasmModuleToAllWorkers((()=>se()))}))},initWorker(){Oe=!1},setExitStatus:e=>O=e,terminateAllThreads__deps:["$terminateWorker"],terminateAllThreads:()=>{for(var e of Ie.runningWorkers)be(e);for(var e of Ie.unusedWorkers)be(e);Ie.unusedWorkers=[],Ie.runningWorkers=[],Ie.pthreads=[]},returnWorkerToPool:e=>{var t=e.pthread_ptr;delete Ie.pthreads[t],Ie.unusedWorkers.push(e),Ie.runningWorkers.splice(Ie.runningWorkers.indexOf(e),1),e.pthread_ptr=0,nr(t)},receiveObjectTransfer(e){},threadInitTLS(){Ie.tlsInitFunctions.forEach((e=>e()))},loadWasmModuleToWorker:e=>new Promise((t=>{e.onmessage=r=>{var n=r.data,a=n.cmd;if(n.targetThread&&n.targetThread!=er()){var o=Ie.pthreads[n.targetThread];o?o.postMessage(n,n.transferList):C('Internal error! Worker sent a message "'.concat(a,'" to target pthread ').concat(n.targetThread,", but that thread no longer exists!"))}else{var s;"checkMailbox"===a?Et():"spawnThread"===a?ye(n):"cleanupThread"===a?ge(n.thread):"killThread"===a?(e=>{var t=Ie.pthreads[e];delete Ie.pthreads[e],be(t),nr(e),Ie.runningWorkers.splice(Ie.runningWorkers.indexOf(t),1),t.pthread_ptr=0})(n.thread):"cancelThread"===a?(s=n.thread,Ie.pthreads[s].postMessage({cmd:"cancel"})):"loaded"===a?(e.loaded=!0,E&&!e.pthread_ptr&&e.unref(),t(e)):"alert"===a?alert("Thread ".concat(n.threadId,": ").concat(n.text)):"setimmediate"===n.target?e.postMessage(n):"callHandler"===a?f[n.handler](...n.args):a&&C("worker sent an unknown command ".concat(a))}},e.onerror=e=>{throw C("".concat("worker sent an error!"," ").concat(e.filename,":").concat(e.lineno,": ").concat(e.message)),e},E&&(e.on("message",(t=>e.onmessage({data:t}))),e.on("error",(t=>e.onerror(t))));var n=[];for(var a of["onExit","onAbort","print","printErr"])f.hasOwnProperty(a)&&n.push(a);e.postMessage({cmd:"load",handlers:n,urlOrBlob:f.mainScriptUrlOrBlob||r,wasmMemory:S,wasmModule:N})})),loadWasmModuleToAllWorkers(e){if(T)return e();Promise.all(Ie.unusedWorkers.map(Ie.loadWasmModuleToWorker)).then(e)},allocateUnusedWorker(){var e,t=M("duckdb_wasm.worker.js");e=new Worker(t),Ie.unusedWorkers.push(e)},getNewWorker:()=>(0==Ie.unusedWorkers.length&&(Ie.allocateUnusedWorker(),Ie.loadWasmModuleToWorker(Ie.unusedWorkers[0])),Ie.unusedWorkers.pop())};f.PThread=Ie;var Se=e=>{for(;e.length>0;)e.shift()(f)};function Ne(e){if(T)return Me(1,0,e);Re(e)}f.establishStackSpace=()=>{var e=er(),t=s()[e+52>>>2>>>0],r=s()[e+56>>>2>>>0];ir(t,t-r),ur(t)};var Pe,Ce=[];f.invokeEntryPoint=(e,t)=>{var r,n,a;a=((n=Ce[r=e])||(r>=Ce.length&&(Ce.length=r+1),Ce[r]=n=Pe.get(r)),n)(t),ve()?Ie.setExitStatus(a):ar(a)};var Oe=f.noExitRuntime||!0;function Be(){ie("missing function: _ZN18duckdb_skiplistlib9skip_list19_throw_exceeds_sizeEm")}function xe(e,t,r,n){return T?Me(2,1,e,t,r,n):We(e,t,r,n)}function We(e,t,r,n){if(e>>>=0,t>>>=0,r>>>=0,n>>>=0,"undefined"==typeof SharedArrayBuffer)return C("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];if(T&&0===a.length)return xe(e,t,r,n);var o={startRoutine:r,pthread_ptr:e,arg:n,transferList:a};return T?(o.cmd="spawnThread",postMessage(o,a),0):ye(o)}function Le(e,t,r,n,a){if(T)return Me(3,1,e,t,r,n,a);r>>>=0,n>>>=0,a>>>=0;for(var s=0,i=(t>>>=0)?o()[t>>>2>>>0]:0,l=t?o()[t+4>>>2>>>0]:0,u=r?o()[r>>>2>>>0]:0,c=r?o()[r+4>>>2>>>0]:0,f=n?o()[n>>>2>>>0]:0,d=n?o()[n+4>>>2>>>0]:0,h=0,_=0,p=0,b=0,g=0,m=0,y=(t?o()[t>>>2>>>0]:0)|(r?o()[r>>>2>>>0]:0)|(n?o()[n>>>2>>>0]:0),w=(t?o()[t+4>>>2>>>0]:0)|(r?o()[r+4>>>2>>>0]:0)|(n?o()[n+4>>>2>>>0]:0),v=function(e,t,r,n){return e<32?t&n:r&n},A=0;A<e;A++){var k=1<<A%32;if(v(A,y,w,k)){var E=Te.getStreamFromFD(A),U=Te.DEFAULT_POLLMASK;if(E.stream_ops.poll){var M=-1;a&&(M=1e3*((t?o()[a>>>2>>>0]:0)+(t?o()[a+4>>>2>>>0]:0)/1e6)),U=E.stream_ops.poll(E,M)}1&U&&v(A,i,l,k)&&(A<32?h|=k:_|=k,s++),4&U&&v(A,u,c,k)&&(A<32?p|=k:b|=k,s++),2&U&&v(A,f,d,k)&&(A<32?g|=k:m|=k,s++)}}return t&&(o()[t>>>2>>>0]=h,o()[t+4>>>2>>>0]=_),r&&(o()[r>>>2>>>0]=p,o()[r+4>>>2>>>0]=b),n&&(o()[n>>>2>>>0]=g,o()[n+4>>>2>>>0]=m),s}function je(){ie("missing function: $SOCKFS")}function qe(){ie("missing function: $FS")}Be.stub=!0,je.stub=!0,qe.stub=!0;var Ke=e=>{var t=je.getSocket(e);if(!t)throw new qe.ErrnoError(8);return t},ze=e=>(255&e)+"."+(e>>8&255)+"."+(e>>16&255)+"."+(e>>24&255),Ge=e=>{var t="",r=0,n=0,a=0,o=0,s=0,i=0,l=[65535&e[0],e[0]>>16,65535&e[1],e[1]>>16,65535&e[2],e[2]>>16,65535&e[3],e[3]>>16],u=!0,c="";for(i=0;i<5;i++)if(0!==l[i]){u=!1;break}if(u){if(c=ze(l[6]|l[7]<<16),-1===l[5])return(t="::ffff:")+c;if(0===l[5])return"0.0.0.0"===c&&(c=""),"0.0.0.1"===c&&(c="1"),(t="::")+c}for(r=0;r<8;r++)0===l[r]&&(r-a>1&&(s=0),a=r,s++),s>n&&(o=r-(n=s)+1);for(r=0;r<8;r++)n>1&&0===l[r]&&r>=o&&r<o+n?r===o&&(t+=":",0===o&&(t+=":")):(t+=Number(_ntohs(65535&l[r])).toString(16),t+=r<7?":":"");return t},Ye=(e,t)=>{var r,n=a()[e>>>1>>>0],s=_ntohs((S.buffer!=B.buffer&&Y(),L)[e+2>>>1>>>0]);switch(n){case 2:if(16!==t)return{errno:28};r=o()[e+4>>>2>>>0],r=ze(r);break;case 10:if(28!==t)return{errno:28};r=[o()[e+8>>>2>>>0],o()[e+12>>>2>>>0],o()[e+16>>>2>>>0],o()[e+20>>>2>>>0]],r=Ge(r);break;default:return{errno:5}}return{family:n,addr:r,port:s}},Ve=e=>{for(var t=e.split("."),r=0;r<4;r++){var n=Number(t[r]);if(isNaN(n))return null;t[r]=n}return(t[0]|t[1]<<8|t[2]<<16|t[3]<<24)>>>0},Je=e=>parseInt(e),Xe=e=>{var t,r,n,a,o=[];if(!/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i.test(e))return null;if("::"===e)return[0,0,0,0,0,0,0,0];for((e=e.startsWith("::")?e.replace("::","Z:"):e.replace("::",":Z:")).indexOf(".")>0?((t=(e=e.replace(new RegExp("[.]","g"),":")).split(":"))[t.length-4]=Je(t[t.length-4])+256*Je(t[t.length-3]),t[t.length-3]=Je(t[t.length-2])+256*Je(t[t.length-1]),t=t.slice(0,t.length-2)):t=e.split(":"),n=0,a=0,r=0;r<t.length;r++)if("string"==typeof t[r])if("Z"===t[r]){for(a=0;a<8-t.length+1;a++)o[r+a]=0;n=a-1}else o[r+n]=_htons(parseInt(t[r],16));else o[r+n]=t[r];return[o[1]<<16|o[0],o[3]<<16|o[2],o[5]<<16|o[4],o[7]<<16|o[6]]},Ze={address_map:{id:1,addrs:{},names:{}},lookup_name(e){var t,r=Ve(e);if(null!==r)return e;if(null!==(r=Xe(e)))return e;if(Ze.address_map.addrs[e])t=Ze.address_map.addrs[e];else{var n=Ze.address_map.id++;G(n<65535,"exceeded max address mappings of 65535"),t="172.29."+(255&n)+"."+(65280&n),Ze.address_map.names[t]=e,Ze.address_map.addrs[e]=t}return t},lookup_addr:e=>Ze.address_map.names[e]?Ze.address_map.names[e]:null},$e=(e,t,r)=>{if(r&&0===e)return null;var n=Ye(e,t);if(n.errno)throw new qe.ErrnoError(n.errno);return n.addr=Ze.lookup_addr(n.addr)||n.addr,n};function Qe(e,t,r,n,a,o){if(T)return Me(4,1,e,t,r,n,a,o);t>>>=0,r>>>=0;var s=Ke(e),i=$e(t,r);return s.sock_ops.bind(s,i.addr,i.port),0}function et(e,t,r,n,a,o){if(T)return Me(5,1,e,t,r,n,a,o);t>>>=0,r>>>=0;var s=Ke(e),i=$e(t,r);return s.sock_ops.connect(s,i.addr,i.port),0}function tt(e,t,r,n){if(T)return Me(6,1,e,t,r,n);t>>>=0}function rt(e,t,r){return T?Me(7,1,e,t,r):(r>>>=0,Te.varargs=r,0)}function nt(e,t){if(T)return Me(8,1,e,t);t>>>=0}function at(e,t,r){if(T)return Me(9,1,e,t,r);Ue(t,r)}var ot=(e,t,r,n)=>{if(!(n>0))return 0;for(var a=r>>>=0,o=r+n-1,s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++s)),i<=127){if(r>=o)break;t[r++>>>0]=i}else if(i<=2047){if(r+1>=o)break;t[r++>>>0]=192|i>>6,t[r++>>>0]=128|63&i}else if(i<=65535){if(r+2>=o)break;t[r++>>>0]=224|i>>12,t[r++>>>0]=128|i>>6&63,t[r++>>>0]=128|63&i}else{if(r+3>=o)break;t[r++>>>0]=240|i>>18,t[r++>>>0]=128|i>>12&63,t[r++>>>0]=128|i>>6&63,t[r++>>>0]=128|63&i}}return t[r>>>0]=0,r-a},st=(e,t,r)=>ot(e,n(),t,r);function it(e,t,r){if(T)return Me(10,1,e,t,r);t>>>=0,r>>>=0}var lt=(e,t,r,n,s)=>{switch(t){case 2:r=Ve(r),me(e,16),s&&(o()[s>>>2>>>0]=16),a()[e>>>1>>>0]=t,o()[e+4>>>2>>>0]=r,a()[e+2>>>1>>>0]=_htons(n);break;case 10:r=Xe(r),me(e,28),s&&(o()[s>>>2>>>0]=28),o()[e>>>2>>>0]=t,o()[e+8>>>2>>>0]=r[0],o()[e+12>>>2>>>0]=r[1],o()[e+16>>>2>>>0]=r[2],o()[e+20>>>2>>>0]=r[3],a()[e+2>>>1>>>0]=_htons(n);break;default:return 5}return 0};function ut(e,t,r,n,a,o){if(T)return Me(11,1,e,t,r,n,a,o);t>>>=0,r>>>=0;var s=Ke(e);return s.daddr?(lt(t,s.family,Ze.lookup_name(s.daddr),s.dport,r),0):-53}function ct(e,t,r,n,a,s){if(T)return Me(12,1,e,t,r,n,a,s);n>>>=0,a>>>=0;var i=Ke(e);return 1===t&&4===r?(o()[n>>>2>>>0]=i.error,o()[a>>>2>>>0]=4,i.error=null,0):-50}function ft(e,t,r){return T?Me(13,1,e,t,r):(r>>>=0,Te.varargs=r,0)}function dt(e,t){if(T)return Me(14,1,e,t);e>>>=0,t>>>=0}function ht(e,t,r){if(T)return Me(15,1,e,t,r);t>>>=0}function _t(e,t,r,n){if(T)return Me(16,1,e,t,r,n);t>>>=0,r>>>=0}function pt(e,t,r,n){if(T)return Me(17,1,e,t,r,n);t>>>=0,n>>>=0,Te.varargs=n}function bt(e,t,r,a,o,s){if(T)return Me(18,1,e,t,r,a,o,s);t>>>=0,r>>>=0,o>>>=0,s>>>=0;var i=Ke(e),l=i.sock_ops.recvmsg(i,r);return l?(o&&lt(o,i.family,Ze.lookup_name(l.addr),l.port,s),n().set(l.buffer,t>>>0),l.buffer.byteLength):0}function gt(e,t,r,n){if(T)return Me(19,1,e,t,r,n);t>>>=0,n>>>=0}function mt(e){if(T)return Me(20,1,e);e>>>=0}function yt(e,t,r,n,a,o){if(T)return Me(21,1,e,t,r,n,a,o);t>>>=0,r>>>=0,a>>>=0,o>>>=0}function wt(e,t,r){if(T)return Me(22,1,e,t,r)}function vt(e,t){if(T)return Me(23,1,e,t);e>>>=0,t>>>=0}function At(e,t,r){if(T)return Me(24,1,e,t,r);t>>>=0}function kt(e){if(e>>>=0,"function"==typeof Atomics.waitAsync){Atomics.waitAsync(o(),e>>>2,e).value.then(Et);var t=e+128;Atomics.store(o(),t>>>2,1)}}f.__emscripten_thread_mailbox_await=kt;var Et=()=>{var e=er();e&&(kt(e),(e=>{if(!z)try{e(),(()=>{if(!ve())try{T?ar(O):Re(O)}catch(e){He(e)}})()}catch(e){He(e)}})(or))};f.checkMailbox=Et;var Tt,Ut=[];Tt=()=>performance.timeOrigin+performance.now();var Mt=e=>{var t=(e-S.buffer.byteLength+65535)/65536;try{return S.grow(t),Y(),1}catch(e){}},Dt={},Ft=()=>{if(!Ft.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:w||"./this.program"};for(var t in Dt)void 0===Dt[t]?delete e[t]:e[t]=Dt[t];var r=[];for(var t in e)r.push("".concat(t,"=").concat(e[t]));Ft.strings=r}return Ft.strings},Rt=function(e,r){if(T)return Me(25,1,e,r);e>>>=0,r>>>=0;var n=0;return Ft().forEach(((a,o)=>{var i=r+n;s()[e+4*o>>>2>>>0]=i,((e,r)=>{for(var n=0;n<e.length;++n)t()[r++>>>0>>>0]=e.charCodeAt(n);t()[r>>>0>>>0]=0})(a,i),n+=a.length+1})),0},Ht=function(e,t){if(T)return Me(26,1,e,t);e>>>=0,t>>>=0;var r=Ft();s()[e>>>2>>>0]=r.length;var n=0;return r.forEach((e=>n+=e.length+1)),s()[t>>>2>>>0]=n,0};function It(e){return T?Me(27,1,e):52}function St(e,r){if(T)return Me(28,1,e,r);r>>>=0;var n=0;return 0==e?n=2:1!=e&&2!=e||(n=64),t()[r>>>0>>>0]=2,a()[r+2>>>1>>>0]=1,ce=[n>>>0,(ue=n,+Math.abs(ue)>=1?ue>0?+Math.floor(ue/4294967296)>>>0:~~+Math.ceil((ue-+(~~ue>>>0))/4294967296)>>>0:0)],o()[r+8>>>2>>>0]=ce[0],o()[r+12>>>2>>>0]=ce[1],ce=[0,(ue=0,+Math.abs(ue)>=1?ue>0?+Math.floor(ue/4294967296)>>>0:~~+Math.ceil((ue-+(~~ue>>>0))/4294967296)>>>0:0)],o()[r+16>>>2>>>0]=ce[0],o()[r+20>>>2>>>0]=ce[1],0}function Nt(e,t,r,n,a,o){return T?Me(29,1,e,t,r,n,a,o):(t>>>=0,r>>>=0,Ue(n,a),o>>>=0,52)}function Pt(e,t,r,n,a,o){return T?Me(30,1,e,t,r,n,a,o):(t>>>=0,r>>>=0,Ue(n,a),o>>>=0,52)}function Ct(e,t,r,n){return T?Me(31,1,e,t,r,n):(t>>>=0,r>>>=0,n>>>=0,52)}function Ot(e,t,r,n,a){return T?Me(32,1,e,t,r,n,a):(Ue(t,r),a>>>=0,70)}function Bt(e){return T?Me(33,1,e):52}var xt=[null,[],[]];function Wt(e,t,r,a){if(T)return Me(34,1,e,t,r,a);t>>>=0,r>>>=0,a>>>=0;for(var o,i,l,u=0,c=0;c<r;c++){var f=s()[t>>>2>>>0],d=s()[t+4>>>2>>>0];t+=8;for(var h=0;h<d;h++)o=e,i=n()[f+h>>>0],l=void 0,l=xt[o],0===i||10===i?((1===o?P:C)(ke(l,0)),l.length=0):l.push(i);u+=d}return s()[a>>>2>>>0]=u,0}function Lt(e,t,r,n){if(T)return Me(35,1,e,t,r,n);e>>>=0,t>>>=0,n>>>=0;var a,i=0,l=0,u=0,c=0,f=0,d=0;function h(e,t,r,n,a,i){var l,u,c;return u=10===e?28:16,a=10===e?Ge(a):ze(a),l=sr(u),G(!lt(l,e,a,i)),c=sr(32),o()[c+4>>>2>>>0]=e,o()[c+8>>>2>>>0]=t,o()[c+12>>>2>>>0]=r,s()[c+24>>>2>>>0]=n,s()[c+20>>>2>>>0]=l,o()[c+16>>>2>>>0]=10===e?28:16,o()[c+28>>>2>>>0]=0,c}if((r>>>=0)&&(u=o()[r>>>2>>>0],c=o()[r+4>>>2>>>0],f=o()[r+8>>>2>>>0],d=o()[r+12>>>2>>>0]),f&&!d&&(d=2===f?17:6),!f&&d&&(f=17===d?2:1),0===d&&(d=6),0===f&&(f=1),!e&&!t)return-2;if(-1088&u)return-1;if(0!==r&&2&o()[r>>>2>>>0]&&!e)return-1;if(32&u)return-2;if(0!==f&&1!==f&&2!==f)return-7;if(0!==c&&2!==c&&10!==c)return-6;if(t&&(t=Ee(t),l=parseInt(t,10),isNaN(l)))return 1024&u?-2:-8;if(!e)return 0===c&&(c=2),0==(1&u)&&(i=2===c?_htonl(2130706433):[0,0,0,1]),a=h(c,f,d,null,i,l),s()[n>>>2>>>0]=a,0;if(e=Ee(e),null!==(i=Ve(e)))if(0===c||2===c)c=2;else{if(!(10===c&&8&u))return-2;i=[0,0,_htonl(65535),i],c=10}else if(null!==(i=Xe(e))){if(0!==c&&10!==c)return-2;c=10}return null!=i?(a=h(c,f,d,e,i,l),s()[n>>>2>>>0]=a,0):4&u?-2:(e=Ze.lookup_name(e),i=Ve(e),0===c?c=2:10===c&&(i=[0,0,_htonl(65535),i]),a=h(c,f,d,null,i,l),s()[n>>>2>>>0]=a,0)}var jt=e=>(jt=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>(e.set(crypto.getRandomValues(new Uint8Array(e.byteLength))),e);if(E)try{var e=c("crypto");if(e.randomFillSync)return t=>e.randomFillSync(t);var t=e.randomBytes;return e=>(e.set(t(e.byteLength)),e)}catch(e){}ie("initRandomDevice")})())(e),qt=e=>e%4==0&&(e%100!=0||e%400==0),Kt=[31,29,31,30,31,30,31,31,30,31,30,31],zt=[31,28,31,30,31,30,31,31,30,31,30,31],Gt=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t},Yt=(e,r)=>{t().set(e,r>>>0)};function Vt(e,t,r,n){e>>>=0,t>>>=0,r>>>=0,n>>>=0;var a=s()[n+40>>>2>>>0],i={tm_sec:o()[n>>>2>>>0],tm_min:o()[n+4>>>2>>>0],tm_hour:o()[n+8>>>2>>>0],tm_mday:o()[n+12>>>2>>>0],tm_mon:o()[n+16>>>2>>>0],tm_year:o()[n+20>>>2>>>0],tm_wday:o()[n+24>>>2>>>0],tm_yday:o()[n+28>>>2>>>0],tm_isdst:o()[n+32>>>2>>>0],tm_gmtoff:o()[n+36>>>2>>>0],tm_zone:a?Ee(a):""},l=Ee(r),u={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in u)l=l.replace(new RegExp(c,"g"),u[c]);var f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d=["January","February","March","April","May","June","July","August","September","October","November","December"];function h(e,t,r){for(var n="number"==typeof e?e.toString():e||"";n.length<t;)n=r[0]+n;return n}function _(e,t){return h(e,t,"0")}function p(e,t){function r(e){return e<0?-1:e>0?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function b(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function g(e){var t=((e,t)=>{for(var r=new Date(e.getTime());t>0;){var n=qt(r.getFullYear()),a=r.getMonth(),o=(n?Kt:zt)[a];if(!(t>o-r.getDate()))return r.setDate(r.getDate()+t),r;t-=o-r.getDate()+1,r.setDate(1),a<11?r.setMonth(a+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1))}return r})(new Date(e.tm_year+1900,0,1),e.tm_yday),r=new Date(t.getFullYear(),0,4),n=new Date(t.getFullYear()+1,0,4),a=b(r),o=b(n);return p(a,t)<=0?p(o,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var m={"%a":e=>f[e.tm_wday].substring(0,3),"%A":e=>f[e.tm_wday],"%b":e=>d[e.tm_mon].substring(0,3),"%B":e=>d[e.tm_mon],"%C":e=>_((e.tm_year+1900)/100|0,2),"%d":e=>_(e.tm_mday,2),"%e":e=>h(e.tm_mday,2," "),"%g":e=>g(e).toString().substring(2),"%G":e=>g(e),"%H":e=>_(e.tm_hour,2),"%I":e=>{var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),_(t,2)},"%j":e=>_(e.tm_mday+((e,t)=>{for(var r=0,n=0;n<=t;r+=e[n++]);return r})(qt(e.tm_year+1900)?Kt:zt,e.tm_mon-1),3),"%m":e=>_(e.tm_mon+1,2),"%M":e=>_(e.tm_min,2),"%n":()=>"\n","%p":e=>e.tm_hour>=0&&e.tm_hour<12?"AM":"PM","%S":e=>_(e.tm_sec,2),"%t":()=>"\t","%u":e=>e.tm_wday||7,"%U":e=>{var t=e.tm_yday+7-e.tm_wday;return _(Math.floor(t/7),2)},"%V":e=>{var t=Math.floor((e.tm_yday+7-(e.tm_wday+6)%7)/7);if((e.tm_wday+371-e.tm_yday-2)%7<=2&&t++,t){if(53==t){var r=(e.tm_wday+371-e.tm_yday)%7;4==r||3==r&&qt(e.tm_year)||(t=1)}}else{t=52;var n=(e.tm_wday+7-e.tm_yday-1)%7;(4==n||5==n&&qt(e.tm_year%400-1))&&t++}return _(t,2)},"%w":e=>e.tm_wday,"%W":e=>{var t=e.tm_yday+7-(e.tm_wday+6)%7;return _(Math.floor(t/7),2)},"%y":e=>(e.tm_year+1900).toString().substring(2),"%Y":e=>e.tm_year+1900,"%z":e=>{var t=e.tm_gmtoff,r=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(r?"+":"-")+String("0000"+t).slice(-4)},"%Z":e=>e.tm_zone,"%%":()=>"%"};for(var c in l=l.replace(/%%/g,"\0\0"),m)l.includes(c)&&(l=l.replace(new RegExp(c,"g"),m[c](i)));l=l.replace(/\0\0/g,"%");var y,w,v,A=(!1,w=Gt(y=l)+1,v=new Array(w),ot(y,v,0,v.length),v);return A.length>t?0:(Yt(A,e),A.length-1)}Ie.init();var Jt,Xt=[De,Ne,xe,Le,Qe,et,tt,rt,nt,at,it,ut,ct,ft,dt,ht,_t,pt,bt,gt,mt,yt,wt,vt,At,Rt,Ht,It,St,Nt,Pt,Ct,Ot,Bt,Wt,Lt],Zt={n:Be,G:function(e){tr(e>>>=0,!k,1,!A,65536,!1),Ie.threadInitTLS()},t:function(e){e>>>=0,T?postMessage({cmd:"cleanupThread",thread:e}):ge(e)},ha:We,aa:Le,fa:Qe,da:et,Y:tt,b:rt,X:nt,y:at,S:it,_:ut,$:ct,r:ft,U:dt,T:ht,V:_t,s:pt,ba:bt,Q:gt,k:mt,ca:yt,o:wt,W:vt,l:At,pa:()=>1,ea:function(e,t,r){if((e>>>=0)==(t>>>=0))setTimeout((()=>Et()));else if(T)postMessage({targetThread:e,cmd:"checkMailbox"});else{var n=Ie.pthreads[e];if(!n)return;n.postMessage({cmd:"checkMailbox"})}},O:function(e,t,r,n){t>>>=0,n>>>=0,Ut.length=r;for(var a=n>>>3,o=0;o<r;o++)Ut[o]=i()[a+o>>>0];var s=Xt[e];Ie.currentProxiedOperationCallerThread=t;var l=s.apply(null,Ut);return Ie.currentProxiedOperationCallerThread=0,l},w:kt,v:function(e){e>>>=0,E&&Ie.pthreads[e].ref()},e:()=>{ie("")},I:function(e,t){return e>>>=0,globalThis.DUCKDB_RUNTIME.createDirectory(f,e,t)},J:function(e,t){return e>>>=0,globalThis.DUCKDB_RUNTIME.checkDirectory(f,e,t)},F:function(e,t){return e>>>=0,globalThis.DUCKDB_RUNTIME.listDirectoryEntries(f,e,t)},H:function(e,t){return e>>>=0,globalThis.DUCKDB_RUNTIME.removeDirectory(f,e,t)},j:function(e){return globalThis.DUCKDB_RUNTIME.closeFile(f,e)},D:function(e,t){return e>>>=0,globalThis.DUCKDB_RUNTIME.checkFile(f,e,t)},x:function(e){return globalThis.DUCKDB_RUNTIME.getLastFileModificationTime(f,e)},E:function(e,t,r,n){return e>>>=0,r>>>=0,globalThis.DUCKDB_RUNTIME.moveFile(f,e,t,r,n)},L:function(e,t){return globalThis.DUCKDB_RUNTIME.openFile(f,e,t)},f:function(e,t,r,n){return t>>>=0,globalThis.DUCKDB_RUNTIME.readFile(f,e,t,r,n)},K:function(e,t){return globalThis.DUCKDB_RUNTIME.truncateFile(f,e,t)},g:function(e,t,r,n){return t>>>=0,globalThis.DUCKDB_RUNTIME.writeFile(f,e,t,r,n)},M:function(e){return globalThis.DUCKDB_RUNTIME.getDefaultDataProtocol(e)},C:function(e,t){return e>>>=0,globalThis.DUCKDB_RUNTIME.glob(f,e,t)},i:function(e){return globalThis.DUCKDB_RUNTIME.testPlatformFeature(f,e)},N:function(e,t,r,n,a,o){return e>>>=0,r>>>=0,a>>>=0,globalThis.DUCKDB_RUNTIME.callScalarUDF(f,e,t,r,n,a,o)},m:()=>{},qa:()=>Date.now(),u:()=>{throw we+=1,"unwind"},la:function(){return 4294901760},c:Tt,ma:()=>E?g().cpus().length:navigator.hardwareConcurrency,oa:function(e){e>>>=0;var t=n().length;if(e<=t)return!1;var r=4294901760;if(e>r)return!1;for(var a,o=1;o<=4;o*=2){var s=t*(1+.2/o);s=Math.min(s,e+100663296);var i=Math.min(r,(a=Math.max(e,s))+(65536-a%65536)%65536);if(Mt(i))return!0}return!1},ja:Rt,ka:Ht,ga:Re,d:It,na:St,A:Nt,z:Pt,q:Ct,B:Ot,R:Bt,h:Wt,p:Lt,P:function(e,t){return e>>>=0,t>>>=0,jt(n().subarray(e>>>0,e+t>>>0)),0},Z:function(e,t,r,n,a,o,s){r>>>=0,a>>>=0;var i=Ye(e>>>=0,t);if(i.errno)return-6;var l=i.port,u=i.addr,c=!1;if(r&&n){var f;if(1&s||!(f=Ze.lookup_addr(u))){if(8&s)return-2}else u=f;st(u,r,n)+1>=n&&(c=!0)}return a&&o&&st(l=""+l,a,o)+1>=o&&(c=!0),c?-12:0},a:S||f.wasmMemory,ia:function(e,t,r,n,a){return Vt(e>>>=0,t>>>=0,r>>>=0,n>>>=0)}},$t=function(){var e,t,r,n,a={a:Zt};function o(e,t){var r,n,a,o,s;return a=$t=e.exports,o=e=>()=>e()>>>0,s=e=>t=>e(t)>>>0,(a=Object.assign({},a)).fb=o(a.fb),a.__errno_location=o(a.__errno_location),a.emscripten_main_runtime_thread_id=o(a.emscripten_main_runtime_thread_id),a.pb=s(a.pb),a.tb=o(a.tb),a.vb=s(a.vb),n=($t=a).eb,Ie.tlsInitFunctions.push(n),Pe=$t.ta,r=$t.ra,X.unshift(r),N=t,se(),$t}if(oe(),f.instantiateWasm)try{return f.instantiateWasm(a,o)}catch(e){C("Module.instantiateWasm callback failed with error: ".concat(e)),u(e)}return(e=I,t=le,r=a,n=function(e){o(e.instance,e.module)},e||"function"!=typeof WebAssembly.instantiateStreaming||fe(t)||E||"function"!=typeof fetch?_e(t,r,n):fetch(t,{credentials:"same-origin"}).then((e=>WebAssembly.instantiateStreaming(e,r).then(n,(function(e){return C("wasm streaming compile failed: ".concat(e)),C("falling back to ArrayBuffer instantiation"),_e(t,r,n)}))))).catch(u),{}}(),Qt=f._main=(e,t)=>(Qt=f._main=$t.sa)(e,t),er=(f._duckdb_web_fs_glob_add_path=e=>(f._duckdb_web_fs_glob_add_path=$t.ua)(e),f._duckdb_web_clear_response=()=>(f._duckdb_web_clear_response=$t.va)(),f._duckdb_web_fail_with=e=>(f._duckdb_web_fail_with=$t.wa)(e),f._duckdb_web_reset=e=>(f._duckdb_web_reset=$t.xa)(e),f._duckdb_web_connect=()=>(f._duckdb_web_connect=$t.ya)(),f._duckdb_web_disconnect=e=>(f._duckdb_web_disconnect=$t.za)(e),f._duckdb_web_flush_files=()=>(f._duckdb_web_flush_files=$t.Aa)(),f._duckdb_web_flush_file=e=>(f._duckdb_web_flush_file=$t.Ba)(e),f._duckdb_web_open=(e,t)=>(f._duckdb_web_open=$t.Ca)(e,t),f._duckdb_web_get_global_file_info=(e,t)=>(f._duckdb_web_get_global_file_info=$t.Da)(e,t),f._duckdb_web_collect_file_stats=(e,t,r)=>(f._duckdb_web_collect_file_stats=$t.Ea)(e,t,r),f._duckdb_web_export_file_stats=(e,t)=>(f._duckdb_web_export_file_stats=$t.Fa)(e,t),f._duckdb_web_fs_drop_file=(e,t)=>(f._duckdb_web_fs_drop_file=$t.Ga)(e,t),f._duckdb_web_fs_drop_files=e=>(f._duckdb_web_fs_drop_files=$t.Ha)(e),f._duckdb_web_fs_glob_file_infos=(e,t)=>(f._duckdb_web_fs_glob_file_infos=$t.Ia)(e,t),f._duckdb_web_fs_get_file_info_by_id=(e,t,r)=>(f._duckdb_web_fs_get_file_info_by_id=$t.Ja)(e,t,r),f._duckdb_web_fs_get_file_info_by_name=(e,t,r)=>(f._duckdb_web_fs_get_file_info_by_name=$t.Ka)(e,t,r),f._duckdb_web_fs_register_file_url=(e,t,r,n,a)=>(f._duckdb_web_fs_register_file_url=$t.La)(e,t,r,n,a),f._duckdb_web_fs_register_file_buffer=(e,t,r,n)=>(f._duckdb_web_fs_register_file_buffer=$t.Ma)(e,t,r,n),f._duckdb_web_copy_file_to_buffer=(e,t)=>(f._duckdb_web_copy_file_to_buffer=$t.Na)(e,t),f._duckdb_web_copy_file_to_path=(e,t,r)=>(f._duckdb_web_copy_file_to_path=$t.Oa)(e,t,r),f._duckdb_web_get_version=e=>(f._duckdb_web_get_version=$t.Pa)(e),f._duckdb_web_get_feature_flags=()=>(f._duckdb_web_get_feature_flags=$t.Qa)(),f._duckdb_web_tokenize=(e,t)=>(f._duckdb_web_tokenize=$t.Ra)(e,t),f._duckdb_web_udf_scalar_create=(e,t,r)=>(f._duckdb_web_udf_scalar_create=$t.Sa)(e,t,r),f._duckdb_web_prepared_create=(e,t,r)=>(f._duckdb_web_prepared_create=$t.Ta)(e,t,r),f._duckdb_web_prepared_close=(e,t,r)=>(f._duckdb_web_prepared_close=$t.Ua)(e,t,r),f._duckdb_web_prepared_run=(e,t,r,n)=>(f._duckdb_web_prepared_run=$t.Va)(e,t,r,n),f._duckdb_web_prepared_send=(e,t,r,n)=>(f._duckdb_web_prepared_send=$t.Wa)(e,t,r,n),f._duckdb_web_query_run=(e,t,r)=>(f._duckdb_web_query_run=$t.Xa)(e,t,r),f._duckdb_web_pending_query_start=(e,t,r)=>(f._duckdb_web_pending_query_start=$t.Ya)(e,t,r),f._duckdb_web_pending_query_poll=(e,t,r)=>(f._duckdb_web_pending_query_poll=$t.Za)(e,t,r),f._duckdb_web_pending_query_cancel=(e,t)=>(f._duckdb_web_pending_query_cancel=$t._a)(e,t),f._duckdb_web_query_fetch_results=(e,t)=>(f._duckdb_web_query_fetch_results=$t.$a)(e,t),f._duckdb_web_get_tablenames=(e,t,r)=>(f._duckdb_web_get_tablenames=$t.ab)(e,t,r),f._duckdb_web_insert_arrow_from_ipc_stream=(e,t,r,n,a)=>(f._duckdb_web_insert_arrow_from_ipc_stream=$t.bb)(e,t,r,n,a),f._duckdb_web_insert_csv_from_path=(e,t,r,n)=>(f._duckdb_web_insert_csv_from_path=$t.cb)(e,t,r,n),f._duckdb_web_insert_json_from_path=(e,t,r,n)=>(f._duckdb_web_insert_json_from_path=$t.db)(e,t,r,n),f.__emscripten_tls_init=()=>(f.__emscripten_tls_init=$t.eb)(),f._pthread_self=()=>(er=f._pthread_self=$t.fb)()),tr=f.__emscripten_thread_init=(e,t,r,n,a,o)=>(tr=f.__emscripten_thread_init=$t.gb)(e,t,r,n,a,o),rr=(f.__emscripten_thread_crashed=()=>(f.__emscripten_thread_crashed=$t.hb)(),(e,t,r,n)=>(rr=$t.lb)(e,t,r,n)),nr=e=>(nr=$t.mb)(e),ar=f.__emscripten_thread_exit=e=>(ar=f.__emscripten_thread_exit=$t.nb)(e),or=()=>(or=$t.ob)(),sr=f._malloc=e=>(sr=f._malloc=$t.pb)(e),ir=(f._free=e=>(f._free=$t.qb)(e),(e,t)=>(ir=$t.sb)(e,t)),lr=()=>(lr=$t.tb)(),ur=e=>(ur=$t.ub)(e),cr=e=>(cr=$t.vb)(e);function fr(){if(!(re>0)){if(T)return l(f),ee(),void startWorker(f);!function(){if(f.preRun)for("function"==typeof f.preRun&&(f.preRun=[f.preRun]);f.preRun.length;)te(f.preRun.shift());Se(J)}(),re>0||(f.setStatus?(f.setStatus("Running..."),setTimeout((function(){setTimeout((function(){f.setStatus("")}),1),e()}),1)):e())}function e(){Jt||(Jt=!0,f.calledRun=!0,z||(ee(),T||Se(Z),l(f),f.onRuntimeInitialized&&f.onRuntimeInitialized(),dr&&function(){var e=Qt;try{var t=e(0,0);return Fe(t),t}catch(e){return He(e)}}(),function(){if(!T){if(f.postRun)for("function"==typeof f.postRun&&(f.postRun=[f.postRun]);f.postRun.length;)e=f.postRun.shift(),$.unshift(e);var e;Se($)}}()))}}if(f.wasmMemory=S,f.stackAlloc=cr,f.stackSave=lr,f.stackRestore=ur,f.keepRuntimeAlive=ve,f.ccall=(e,t,r,n,a)=>{var o={string:e=>{var t=0;return null!=e&&0!==e&&(t=(e=>{var t=Gt(e)+1,r=cr(t);return st(e,r,t),r})(e)),t},array:e=>{var t=cr(e.length);return Yt(e,t),t}},s=(e=>f["_"+e])(e),i=[],l=0;if(n)for(var u=0;u<n.length;u++){var c=o[r[u]];c?(0===l&&(l=lr()),i[u]=c(n[u])):i[u]=n[u]}var d,h=s.apply(null,i);return d=h,0!==l&&ur(l),h=function(e){return"string"===t?Ee(e):"boolean"===t?Boolean(e):e}(d),h},f.ExitStatus=pe,f.PThread=Ie,ae=function e(){Jt||fr(),Jt||(ae=e)},f.preInit)for("function"==typeof f.preInit&&(f.preInit=[f.preInit]);f.preInit.length>0;)f.preInit.pop()();var dr=!0;return f.noInitialRun&&(dr=!1),fr(),e.ready});"object"==typeof e&&"object"==typeof t?t.exports=n:"function"==typeof define&&define.amd&&define([],(()=>n))}}),y=f({"(disabled):crypto"(){}}),w=f({"(disabled):../../node_modules/buffer/index.js"(){}}),v=f({"../../node_modules/js-sha256/src/sha256.js"(e,t){!function(){var e="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA256_NO_WINDOW&&(r=!1);var a=!r&&"object"==typeof self,o=!n.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;o?n=global:a&&(n=self);var s=!n.JS_SHA256_NO_COMMON_JS&&"object"==typeof t&&t.exports,i="function"==typeof define&&define.amd,l=!n.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,u="0123456789abcdef".split(""),c=[-2147483648,8388608,32768,128],f=[24,16,8,0],d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=["hex","array","digest","arrayBuffer"],_=[];!n.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!l||!n.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var p=function(e,t){return function(r){return new A(t,!0).update(r)[e]()}},b=function(e){var t=p("hex",e);o&&(t=g(t,e)),t.create=function(){return new A(e)},t.update=function(e){return t.create().update(e)};for(var r=0;r<h.length;++r){var n=h[r];t[n]=p(n,e)}return t},g=function(t,r){var a,o=y(),s=w().Buffer,i=r?"sha224":"sha256";return a=s.from&&!n.JS_SHA256_NO_BUFFER_FROM?s.from:function(e){return new s(e)},function(r){if("string"==typeof r)return o.createHash(i).update(r,"utf8").digest("hex");if(null==r)throw new Error(e);return r.constructor===ArrayBuffer&&(r=new Uint8Array(r)),Array.isArray(r)||ArrayBuffer.isView(r)||r.constructor===s?o.createHash(i).update(a(r)).digest("hex"):t(r)}},m=function(e,t){return function(r,n){return new k(r,t,!0).update(n)[e]()}},v=function(e){var t=m("hex",e);t.create=function(t){return new k(t,e)},t.update=function(e,r){return t.create(e).update(r)};for(var r=0;r<h.length;++r){var n=h[r];t[n]=m(n,e)}return t};function A(e,t){t?(_[0]=_[16]=_[1]=_[2]=_[3]=_[4]=_[5]=_[6]=_[7]=_[8]=_[9]=_[10]=_[11]=_[12]=_[13]=_[14]=_[15]=0,this.blocks=_):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function k(t,r,n){var a,o=typeof t;if("string"===o){var s,i=[],u=t.length,c=0;for(a=0;a<u;++a)(s=t.charCodeAt(a))<128?i[c++]=s:s<2048?(i[c++]=192|s>>>6,i[c++]=128|63&s):s<55296||s>=57344?(i[c++]=224|s>>>12,i[c++]=128|s>>>6&63,i[c++]=128|63&s):(s=65536+((1023&s)<<10|1023&t.charCodeAt(++a)),i[c++]=240|s>>>18,i[c++]=128|s>>>12&63,i[c++]=128|s>>>6&63,i[c++]=128|63&s);t=i}else{if("object"!==o)throw new Error(e);if(null===t)throw new Error(e);if(l&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||l&&ArrayBuffer.isView(t)))throw new Error(e)}t.length>64&&(t=new A(r,!0).update(t).array());var f=[],d=[];for(a=0;a<64;++a){var h=t[a]||0;f[a]=92^h,d[a]=54^h}A.call(this,r,n),this.update(d),this.oKeyPad=f,this.inner=!0,this.sharedMemory=n}A.prototype.update=function(t){if(!this.finalized){var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(l&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||l&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}for(var a,o,s=0,i=t.length,u=this.blocks;s<i;){if(this.hashed&&(this.hashed=!1,u[0]=this.block,this.block=u[16]=u[1]=u[2]=u[3]=u[4]=u[5]=u[6]=u[7]=u[8]=u[9]=u[10]=u[11]=u[12]=u[13]=u[14]=u[15]=0),r)for(o=this.start;s<i&&o<64;++s)u[o>>>2]|=t[s]<<f[3&o++];else for(o=this.start;s<i&&o<64;++s)(a=t.charCodeAt(s))<128?u[o>>>2]|=a<<f[3&o++]:a<2048?(u[o>>>2]|=(192|a>>>6)<<f[3&o++],u[o>>>2]|=(128|63&a)<<f[3&o++]):a<55296||a>=57344?(u[o>>>2]|=(224|a>>>12)<<f[3&o++],u[o>>>2]|=(128|a>>>6&63)<<f[3&o++],u[o>>>2]|=(128|63&a)<<f[3&o++]):(a=65536+((1023&a)<<10|1023&t.charCodeAt(++s)),u[o>>>2]|=(240|a>>>18)<<f[3&o++],u[o>>>2]|=(128|a>>>12&63)<<f[3&o++],u[o>>>2]|=(128|a>>>6&63)<<f[3&o++],u[o>>>2]|=(128|63&a)<<f[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=u[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},A.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>>2]|=c[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},A.prototype.hash=function(){var e,t,r,n,a,o,s,i,l,u=this.h0,c=this.h1,f=this.h2,h=this.h3,_=this.h4,p=this.h5,b=this.h6,g=this.h7,m=this.blocks;for(e=16;e<64;++e)t=((a=m[e-15])>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,r=((a=m[e-2])>>>17|a<<15)^(a>>>19|a<<13)^a>>>10,m[e]=m[e-16]+t+m[e-7]+r<<0;for(l=c&f,e=0;e<64;e+=4)this.first?(this.is224?(o=300032,g=(a=m[0]-1413257819)-150054599<<0,h=a+24177077<<0):(o=704751109,g=(a=m[0]-210244248)-1521486534<<0,h=a+143694565<<0),this.first=!1):(t=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),n=(o=u&c)^u&f^l,g=h+(a=g+(r=(_>>>6|_<<26)^(_>>>11|_<<21)^(_>>>25|_<<7))+(_&p^~_&b)+d[e]+m[e])<<0,h=a+(t+n)<<0),t=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),n=(s=h&u)^h&c^o,b=f+(a=b+(r=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&_^~g&p)+d[e+1]+m[e+1])<<0,t=((f=a+(t+n)<<0)>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),n=(i=f&h)^f&u^s,p=c+(a=p+(r=(b>>>6|b<<26)^(b>>>11|b<<21)^(b>>>25|b<<7))+(b&g^~b&_)+d[e+2]+m[e+2])<<0,t=((c=a+(t+n)<<0)>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),n=(l=c&f)^c&h^i,_=u+(a=_+(r=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&b^~p&g)+d[e+3]+m[e+3])<<0,u=a+(t+n)<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+u<<0,this.h1=this.h1+c<<0,this.h2=this.h2+f<<0,this.h3=this.h3+h<<0,this.h4=this.h4+_<<0,this.h5=this.h5+p<<0,this.h6=this.h6+b<<0,this.h7=this.h7+g<<0},A.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,o=this.h5,s=this.h6,i=this.h7,l=u[e>>>28&15]+u[e>>>24&15]+u[e>>>20&15]+u[e>>>16&15]+u[e>>>12&15]+u[e>>>8&15]+u[e>>>4&15]+u[15&e]+u[t>>>28&15]+u[t>>>24&15]+u[t>>>20&15]+u[t>>>16&15]+u[t>>>12&15]+u[t>>>8&15]+u[t>>>4&15]+u[15&t]+u[r>>>28&15]+u[r>>>24&15]+u[r>>>20&15]+u[r>>>16&15]+u[r>>>12&15]+u[r>>>8&15]+u[r>>>4&15]+u[15&r]+u[n>>>28&15]+u[n>>>24&15]+u[n>>>20&15]+u[n>>>16&15]+u[n>>>12&15]+u[n>>>8&15]+u[n>>>4&15]+u[15&n]+u[a>>>28&15]+u[a>>>24&15]+u[a>>>20&15]+u[a>>>16&15]+u[a>>>12&15]+u[a>>>8&15]+u[a>>>4&15]+u[15&a]+u[o>>>28&15]+u[o>>>24&15]+u[o>>>20&15]+u[o>>>16&15]+u[o>>>12&15]+u[o>>>8&15]+u[o>>>4&15]+u[15&o]+u[s>>>28&15]+u[s>>>24&15]+u[s>>>20&15]+u[s>>>16&15]+u[s>>>12&15]+u[s>>>8&15]+u[s>>>4&15]+u[15&s];return this.is224||(l+=u[i>>>28&15]+u[i>>>24&15]+u[i>>>20&15]+u[i>>>16&15]+u[i>>>12&15]+u[i>>>8&15]+u[i>>>4&15]+u[15&i]),l},A.prototype.toString=A.prototype.hex,A.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,o=this.h5,s=this.h6,i=this.h7,l=[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,r>>>24&255,r>>>16&255,r>>>8&255,255&r,n>>>24&255,n>>>16&255,n>>>8&255,255&n,a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s];return this.is224||l.push(i>>>24&255,i>>>16&255,i>>>8&255,255&i),l},A.prototype.array=A.prototype.digest,A.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},k.prototype=new A,k.prototype.finalize=function(){if(A.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();A.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),A.prototype.finalize.call(this)}};var E=b();E.sha256=E,E.sha224=b(!0),E.sha256.hmac=v(),E.sha224.hmac=v(!0),s?t.exports=E:(n.sha256=E.sha256,n.sha224=E.sha224,i&&define((function(){return E})))}()}}),A={},k="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;k&&(e=h(),(t=e.parentPort).on("message",(e=>U({data:e}))),r=_(),n=["vm"].map(c),Object.assign(global,{self:global,require:c,Module:A,location:{href:__filename},Worker:e.Worker,importScripts:e=>n.runInThisContext(r.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>t.postMessage(e),performance:global.performance||{now:Date.now}}));var E=!1,T=function(){var e=Array.prototype.slice.call(arguments).join(" ");k?r.writeSync(2,e+"\n"):console.error(e)};self.alert=function(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:A._pthread_self()})},A.instantiateWasm=(e,t)=>{var r=A.wasmModule;return A.wasmModule=null,t(new WebAssembly.Instance(r,e))},self.onunhandledrejection=e=>{throw e.reason||e},self.onmessage=function e(t){var r;try{if("load"===t.data.cmd){let r=[];self.onmessage=e=>r.push(e),self.startWorker=t=>{A=t,postMessage({cmd:"loaded"});for(let t of r)e(t);self.onmessage=e},A.wasmModule=t.data.wasmModule;for(const e of t.data.handlers)A[e]=(...t)=>{postMessage({cmd:"callHandler",handler:e,args:t})};if(A.wasmMemory=t.data.wasmMemory,A.buffer=A.wasmMemory.buffer,A.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var n=URL.createObjectURL(t.data.urlOrBlob);importScripts(n),URL.revokeObjectURL(n)}DuckDB(A)}else if("run"===t.data.cmd){A.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),A.__emscripten_thread_mailbox_await(t.data.pthread_ptr),A.establishStackSpace(),A.PThread.receiveObjectTransfer(t.data),A.PThread.threadInitTLS(),E||(E=!0);try{A.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===t.data.cmd?A._pthread_self()&&A.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("checkMailbox"===t.data.cmd?E&&A.checkMailbox():t.data.cmd&&(T("worker.js received unknown command ".concat(t.data.cmd)),T(t.data)))}catch(e){throw null==(r=A.__emscripten_thread_crashed)||r.call(A),e}};var U=self.onmessage,M=d(m()),D=d(v()),F=function(e,t,r){var n;if(null==(n=null==e?void 0:e.endpoint)?void 0:n.startsWith("http")){const t="".concat(null==e?void 0:e.endpoint),r=t.indexOf("://")+3;return t.substring(r)}return(null==e?void 0:e.endpoint)?"".concat(r,".").concat(null==e?void 0:e.endpoint):"".concat(r,".s3.amazonaws.com")};function R(e,t,r,n,a=null,o=null){((null==t?void 0:t.accessKeyId)||(null==t?void 0:t.sessionToken))&&(function(e,t,r,n=null,a=null){const o=function(e,t,r){var n,a,o,s;const i=H(t);let l=i.path;return I(e)&&(l="/".concat(i.bucket).concat(l)),{url:l,query:"",host:F(e,0,i.bucket),region:null!=(n=null==e?void 0:e.region)?n:"",service:"s3",method:r,accessKeyId:null!=(a=null==e?void 0:e.accessKeyId)?a:"",secretAccessKey:null!=(o=null==e?void 0:e.secretAccessKey)?o:"",sessionToken:null!=(s=null==e?void 0:e.sessionToken)?s:"",dateNow:(new Date).toISOString().replace(/-/g,"").split("T")[0],datetimeNow:(new Date).toISOString().replace(/-/g,"").replace(/:/g,"").split(".")[0]+"Z"}}(e,t,r);return function(e,t=null){var r;const n=null!=(r=null==t?void 0:t.contentHash)?r:"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",a=new Map;a.set("x-amz-date",e.datetimeNow),a.set("x-amz-content-sha256",n),e.sessionToken&&a.set("x-amz-security-token",e.sessionToken);let o="";(null==t?void 0:t.contentType)&&(o+="content-type;"),o+="host;x-amz-content-sha256;x-amz-date",e.sessionToken&&(o+=";x-amz-security-token");let s=e.method+"\n"+function(e,t=!1){const r="0123456789ABCDEF";let n="";for(let a=0;a<e.length;a++){const o=e[a];o>="A"&&o<="Z"||o>="a"&&o<="z"||o>="0"&&o<="9"||"_"==o||"-"==o||"~"==o||"."==o?n+=o:"/"==o?n+=t?"%2F":o:(n+="%",n+=r[o.charCodeAt(0)>>4],n+=r[15&o.charCodeAt(0)])}return n}(e.url)+"\n"+e.query;(null==t?void 0:t.contentType)&&(s+="\ncontent-type:"+(null==t?void 0:t.contentType)),s+="\nhost:"+e.host+"\nx-amz-content-sha256:"+n+"\nx-amz-date:"+e.datetimeNow,e.sessionToken&&e.sessionToken.length>0&&(s+="\nx-amz-security-token:"+e.sessionToken),s+="\n\n"+o+"\n"+n;const i=(0,D.sha256)(s),l="AWS4-HMAC-SHA256\n"+e.datetimeNow+"\n"+e.dateNow+"/"+e.region+"/"+e.service+"/aws4_request\n"+i,u="AWS4"+e.secretAccessKey,c=D.sha256.hmac.arrayBuffer(u,e.dateNow),f=D.sha256.hmac.arrayBuffer(c,e.region),d=D.sha256.hmac.arrayBuffer(f,e.service),h=D.sha256.hmac.arrayBuffer(d,"aws4_request"),_=D.sha256.hmac(h,l);return a.set("Authorization","AWS4-HMAC-SHA256 Credential="+e.accessKeyId+"/"+e.dateNow+"/"+e.region+"/"+e.service+"/aws4_request, SignedHeaders="+o+", Signature="+_),a}(o,{contentType:n,contentHash:a?D.sha256.hex(a):null})}(t,r,n,a,o).forEach(((t,r)=>{e.setRequestHeader(r,t)})),a&&e.setRequestHeader("content-type",a))}function H(e){if(0!=e.indexOf("s3://"))throw new Error("URL needs to start with s3://");const t=e.indexOf("/",5);if(-1==t)throw new Error("URL needs to contain a '/' after the host");const r=e.substring(5,t);if(!r)throw new Error("URL needs to contain a bucket name");const n=e.substring(t);if(!n)throw new Error("URL needs to contain key");return{bucket:r,path:n}}function I(e){var t;return!!(null==(t=null==e?void 0:e.endpoint)?void 0:t.startsWith("http"))}function S(e,t){const r=H(t);return I(e)?"".concat(null==e?void 0:e.endpoint,"/").concat(r.bucket)+r.path:"https://"+F(e,0,r.bucket)+r.path}var N=new TextEncoder,P=new TextDecoder("utf-8");function C(e,t,r){const n=N.encode(r),a=e._malloc(n.byteLength),o=e.HEAPU8.subarray(a,a+n.byteLength);o.set(n),e.HEAPF64[0+(t>>3)]=1,e.HEAPF64[1+(t>>3)]=a,e.HEAPF64[2+(t>>3)]=o.byteLength}function O(e){switch(e){case"UINT8":case"INT8":return 1;case"INT32":case"FLOAT":return 4;case"INT64":case"UINT64":case"DOUBLE":case"VARCHAR":return 8;default:return 0}}function B(e,t,r,n){const a=e.HEAPU8.subarray(t,t+n*O(r));switch(r){case"UINT8":return new Uint8Array(a.buffer,a.byteOffset,n);case"INT8":return new Int8Array(a.buffer,a.byteOffset,n);case"INT32":return new Int32Array(a.buffer,a.byteOffset,n);case"FLOAT":return new Float32Array(a.buffer,a.byteOffset,n);case"DOUBLE":case"VARCHAR":return new Float64Array(a.buffer,a.byteOffset,n);default:return new Array(0)}}function x(e,t,r){const n=e.HEAPU8.subarray(t,t+r);return new Uint8Array(n.buffer,n.byteOffset,r)}function W(e,t,r){const n=e.HEAPU8.subarray(t,t+8*r);return new Float64Array(n.buffer,n.byteOffset,r)}var L=function(){const e=new TextDecoder;return t=>("undefined"!=typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}();function j(e,t){console.error("FAIL WITH: ".concat(t)),e.ccall("duckdb_web_fail_with",null,["string"],[t])}function q(e,t,r){return L(e.HEAPU8.subarray(t,t+r))}function K(e,t,r,n){const a=e.stackSave(),o=e.stackAlloc(24);r.unshift("number"),n.unshift(o),e.ccall(t,null,r,n);const s=e.HEAPF64[0+(o>>3)],i=e.HEAPF64[1+(o>>3)],l=e.HEAPF64[2+(o>>3)];return e.stackRestore(a),[s,i,l]}function z(e){e.ccall("duckdb_web_clear_response",null,[],[])}var G={_files:new Map,_fileInfoCache:new Map,_udfFunctions:new Map,_globalFileInfo:null,getFileInfo(e,t){try{const r=G._fileInfoCache.get(t),[n,a,o]=K(e,"duckdb_web_fs_get_file_info_by_id",["number","number"],[t,(null==r?void 0:r.cacheEpoch)||0]);if(0!==n)return null;if(0===o)return r;const s=q(e,a,o);z(e);try{const e=JSON.parse(s);if(null==e)return null;const r={...e,blob:null};return G._fileInfoCache.set(t,r),r}catch(e){return console.warn(e),null}}catch(e){return console.log(e),null}},getGlobalFileInfo(e){var t;try{const[r,n,a]=K(e,"duckdb_web_get_global_file_info",["number"],[(null==(t=G._globalFileInfo)?void 0:t.cacheEpoch)||0]);if(0!==r)return null;if(0===a)return G._globalFileInfo;const o=q(e,n,a);z(e);const s=JSON.parse(o);return null==s?null:(G._globalFileInfo={...s,blob:null},G._globalFileInfo)}catch(e){return console.log(e),null}},testPlatformFeature:(e,t)=>1===t?"undefined"!=typeof BigInt64Array:(console.warn("test for unknown feature: ".concat(t)),!1),getDefaultDataProtocol:e=>2,openFile:(e,t,r)=>{var n,a;try{G._fileInfoCache.delete(t);const o=G.getFileInfo(e,t);switch(null==o?void 0:o.dataProtocol){case 4:case 5:{if(1&r&&2&r)throw new Error("Opening file ".concat(o.fileName," failed: cannot open file with both read and write flags set"));if(32&r)throw new Error("Opening file ".concat(o.fileName," failed: appending to HTTP/S3 files is not supported"));if(2&r){const t=new XMLHttpRequest;if(5==o.dataProtocol?(t.open("HEAD",S(o.s3Config,o.dataUrl),!1),R(t,o.s3Config,o.dataUrl,"HEAD")):t.open("HEAD",o.dataUrl,!1),t.send(null),200!=t.status&&404!=t.status)throw new Error("Opening file ".concat(o.fileName," failed: Unexpected return status from server (").concat(t.status,")"));if(404==t.status&&!(8&r||16&r))throw new Error("Opening file ".concat(o.fileName," failed: Cannot write to non-existent file without FILE_FLAGS_FILE_CREATE or FILE_FLAGS_FILE_CREATE_NEW flag."));const n=e._malloc(1),a=new Uint8Array;e.HEAPU8.set(a,n);const s=e._malloc(16);return e.HEAPF64[0+(s>>3)]=1,e.HEAPF64[1+(s>>3)]=n,s}if(0==(1&r))throw new Error("Opening file ".concat(o.fileName," failed: unsupported file flags: ").concat(r));let t=null,a=null;try{const r=new XMLHttpRequest;if(5==o.dataProtocol?(r.open("HEAD",S(o.s3Config,o.dataUrl),!1),R(r,o.s3Config,o.dataUrl,"HEAD")):r.open("HEAD",o.dataUrl,!1),r.setRequestHeader("Range","bytes=0-"),r.send(null),t=r.getResponseHeader("Content-Length"),null!==t&&206==r.status){const r=e._malloc(16);return e.HEAPF64[0+(r>>3)]=+t,e.HEAPF64[1+(r>>3)]=0,r}}catch(e){a=e,console.warn("HEAD request with range header failed: ".concat(e))}if(o.allowFullHttpReads){{const r=new XMLHttpRequest;5==o.dataProtocol?(r.open("GET",S(o.s3Config,o.dataUrl),!1),R(r,o.s3Config,o.dataUrl,"GET")):r.open("GET",o.dataUrl,!1),r.responseType="arraybuffer",r.setRequestHeader("Range","bytes=0-0"),r.send(null);const a=null==(n=r.getResponseHeader("Content-Range"))?void 0:n.split("/")[1],s=r.getResponseHeader("Content-Length");let i=null;if(void 0!==a?i=a:null!==t&&+t>1&&(i=t),206==r.status&&null!==s&&1==+s&&null!==i){const t=e._malloc(16);return e.HEAPF64[0+(t>>3)]=+i,e.HEAPF64[1+(t>>3)]=0,t}if(200==r.status&&null!==s&&null!==t&&+s==+t){console.warn("fall back to full HTTP read for: ".concat(o.dataUrl));const t=e._malloc(r.response.byteLength),n=new Uint8Array(r.response,0,r.response.byteLength);e.HEAPU8.set(n,t);const a=e._malloc(16);return e.HEAPF64[0+(a>>3)]=r.response.byteLength,e.HEAPF64[1+(a>>3)]=t,a}}console.warn("falling back to full HTTP read for: ".concat(o.dataUrl));const r=new XMLHttpRequest;if(5==o.dataProtocol?(r.open("GET",S(o.s3Config,o.dataUrl),!1),R(r,o.s3Config,o.dataUrl,"GET")):r.open("GET",o.dataUrl,!1),r.responseType="arraybuffer",r.send(null),200==r.status){const t=e._malloc(r.response.byteLength),n=new Uint8Array(r.response,0,r.response.byteLength);e.HEAPU8.set(n,t);const a=e._malloc(16);return e.HEAPF64[0+(a>>3)]=r.response.byteLength,e.HEAPF64[1+(a>>3)]=t,a}}if(null!=a)throw new Error("Reading file ".concat(o.fileName," failed with error: ").concat(a));return 0}case 2:{const t=null==(a=G._files)?void 0:a.get(o.fileName);if(t){const r=e._malloc(16);return e.HEAPF64[0+(r>>3)]=t.size,e.HEAPF64[1+(r>>3)]=0,r}console.warn("Buffering missing file: ".concat(o.fileName));const r=e._malloc(16),n=e._malloc(1);return e.HEAPF64[0+(r>>3)]=1,e.HEAPF64[1+(r>>3)]=n,r}}}catch(t){console.error(t.toString()),j(e,t.toString())}return 0},glob:(e,t,r)=>{var n;try{const a=q(e,t,r);if(a.startsWith("http")||a.startsWith("s3://")){const t=new XMLHttpRequest;if(a.startsWith("s3://")){const r=G.getGlobalFileInfo(e);t.open("HEAD",S(null==r?void 0:r.s3Config,a),!1),R(t,null==r?void 0:r.s3Config,a,"HEAD")}else t.open("HEAD",a,!1);if(t.send(null),200!=t.status&&206!==t.status){if(!(null==(n=G.getGlobalFileInfo(e))?void 0:n.allowFullHttpReads))return void j(e,"HEAD request failed: ".concat(a,", with full http reads are disabled"));const t=new XMLHttpRequest;if(a.startsWith("s3://")){const r=G.getGlobalFileInfo(e);t.open("GET",S(null==r?void 0:r.s3Config,a),!1),R(t,null==r?void 0:r.s3Config,a,"HEAD")}else t.open("GET",a,!1);if(t.setRequestHeader("Range","bytes=0-0"),t.send(null),200!=t.status&&206!==t.status)return void j(e,"HEAD and GET requests failed: ".concat(a));const r=t.getResponseHeader("Content-Length");r&&+r>1&&console.warn("Range request for ".concat(a," did not return a partial response: ").concat(t.status,' "').concat(t.statusText,'"'))}e.ccall("duckdb_web_fs_glob_add_path",null,["string"],[a])}}catch(t){return console.log(t),j(e,t.toString()),0}},checkFile:(e,t,r)=>{try{const n=q(e,t,r);if(n.startsWith("http")||n.startsWith("s3://")){const t=new XMLHttpRequest;if(n.startsWith("s3://")){const r=G.getGlobalFileInfo(e);t.open("HEAD",S(null==r?void 0:r.s3Config,n),!1),R(t,null==r?void 0:r.s3Config,n,"HEAD")}else t.open("HEAD",n,!1);return t.send(null),206==t.status||200==t.status}}catch(e){return console.log(e),!1}return!1},syncFile:(e,t)=>{},closeFile:(e,t)=>{var r;const n=G.getFileInfo(e,t);switch(G._fileInfoCache.delete(t),null==n?void 0:n.dataProtocol){case 0:case 4:case 5:break;case 1:case 2:return;case 3:{const e=null==(r=G._files)?void 0:r.get(n.fileName);if(!e)throw new Error("No OPFS access handle registered with name: ".concat(n.fileName));return e.flush()}}},truncateFile:(e,t,r)=>{var n;const a=G.getFileInfo(e,t);switch(null==a?void 0:a.dataProtocol){case 4:return void j(e,"Cannot truncate a http file");case 5:return void j(e,"Cannot truncate an s3 file");case 0:case 1:case 2:return void j(e,"truncateFile not implemented");case 3:{const e=null==(n=G._files)?void 0:n.get(a.fileName);if(!e)throw new Error("No OPFS access handle registered with name: ".concat(a.fileName));return e.truncate(r)}}return 0},readFile(e,t,r,n,a){var o,s;if(0==n)return 0;try{const i=G.getFileInfo(e,t);switch(null==i?void 0:i.dataProtocol){case 4:case 5:if(!i.dataUrl)throw new Error("Missing data URL for file ".concat(t));try{const t=new XMLHttpRequest;if(5==i.dataProtocol?(t.open("GET",S(null==i?void 0:i.s3Config,i.dataUrl),!1),R(t,null==i?void 0:i.s3Config,i.dataUrl,"GET")):t.open("GET",i.dataUrl,!1),t.responseType="arraybuffer",t.setRequestHeader("Range","bytes=".concat(a,"-").concat(a+n-1)),t.send(null),206==t.status||200==t.status&&n==t.response.byteLength&&0==a){const a=new Uint8Array(t.response,0,Math.min(t.response.byteLength,n));return e.HEAPU8.set(a,r),a.byteLength}if(200==t.status){console.warn("Range request for ".concat(i.dataUrl," did not return a partial response: ").concat(t.status,' "').concat(t.statusText,'"'));const o=new Uint8Array(t.response,a,Math.min(t.response.byteLength-a,n));return e.HEAPU8.set(o,r),o.byteLength}throw new Error("Range request for ".concat(i.dataUrl," did returned non-success status: ").concat(t.status,' "').concat(t.statusText,'"'))}catch(e){throw console.log(e),new Error("Range request for ".concat(i.dataUrl," failed with error: ").concat(e,'"'))}case 2:{const t=null==(o=G._files)?void 0:o.get(i.fileName);if(!t)throw new Error("No HTML5 file registered with name: ".concat(i.fileName));const s=t.slice(a,a+n),l=new Uint8Array((new FileReaderSync).readAsArrayBuffer(s));return e.HEAPU8.set(l,r),l.byteLength}case 3:{const t=null==(s=G._files)?void 0:s.get(i.fileName);if(!t)throw new Error("No OPFS access handle registered with name: ".concat(i.fileName));const o=e.HEAPU8.subarray(r,r+n);return t.read(o,{at:a})}}return 0}catch(t){return console.log(t),j(e,t.toString()),0}},writeFile:(e,t,r,n,a)=>{var o;const s=G.getFileInfo(e,t);switch(null==s?void 0:s.dataProtocol){case 4:return j(e,"Cannot write to HTTP file"),0;case 5:{const t=e.HEAPU8.subarray(r,r+n),a=new XMLHttpRequest;return a.open("PUT",S(null==s?void 0:s.s3Config,s.dataUrl),!1),R(a,null==s?void 0:s.s3Config,s.dataUrl,"PUT","",t),a.send(t),200!==a.status?(j(e,"Failed writing file: HTTP "+a.status),0):n}case 2:return j(e,"cannot write using the html5 file reader api"),0;case 3:{const t=null==(o=G._files)?void 0:o.get(s.fileName);if(!t)throw new Error("No OPFS access handle registered with name: ".concat(s.fileName));const i=e.HEAPU8.subarray(r,r+n);return t.write(i,{at:a})}}return 0},getLastFileModificationTime:(e,t)=>{var r;const n=G.getFileInfo(e,t);switch(null==n?void 0:n.dataProtocol){case 2:if(!(null==(r=G._files)?void 0:r.get(n.fileName)))throw Error("No handle available for file: ".concat(n.fileName));return 0;case 4:case 5:return(new Date).getTime()}return 0},checkDirectory:(e,t,r)=>{const n=q(e,t,r);return console.log("checkDirectory: ".concat(n)),!1},createDirectory:(e,t,r)=>{const n=q(e,t,r);console.log("createDirectory: ".concat(n))},removeDirectory:(e,t,r)=>{const n=q(e,t,r);console.log("removeDirectory: ".concat(n))},listDirectoryEntries:(e,t,r)=>{const n=q(e,t,r);return console.log("listDirectoryEntries: ".concat(n)),!1},moveFile:(e,t,r,n,a)=>{var o,s;const i=q(e,t,r),l=q(e,n,a),u=null==(o=G._files)?void 0:o.get(i);void 0!==u&&(G._files.delete(u),G._files.set(l,u));for(const[e,t]of(null==(s=G._fileInfoCache)?void 0:s.entries())||[])if(t.dataUrl==i){G._fileInfoCache.delete(e);break}return!0},removeFile:(e,t,r)=>{},callScalarUDF:(e,t,r,n,a,o,s)=>{!function(e,t,r,n,a,o,s,i){try{const l=e._udfFunctions.get(n);if(!l)return void C(t,r,"Unknown UDF with id: "+n);const u=P.decode(t.HEAPU8.subarray(a,a+o)),c=JSON.parse(u),f=W(t,s,i/8),d=e=>{var r;let n=null;switch(void 0!==e.validityBuffer&&(n=x(t,f[e.validityBuffer],c.rows)),e.physicalType){case"VARCHAR":{if(null===e.dataBuffer||void 0===e.dataBuffer)throw new Error("malformed data view, expected data buffer for VARCHAR argument");if(null===e.lengthBuffer||void 0===e.lengthBuffer)throw new Error("malformed data view, expected data length buffer for VARCHAR argument");const r=B(t,f[e.dataBuffer],e.physicalType,c.rows),a=[],o=W(t,f[e.lengthBuffer],c.rows);for(let e=0;e<c.rows;++e){if(null!=n&&!n[e]){a.push(null);continue}const s=t.HEAPU8.subarray(r[e],r[e]+o[e]),i=P.decode(s);a.push(i)}return e=>a[e]}case"STRUCT":{const t={},a=[];for(let n=0;n<((null==(r=e.children)?void 0:r.length)||0);++n){const r=e.children[n],o=d(r);a.push((e=>{t[r.name]=o(e)}))}return null!=n?e=>{if(!n[e])return null;for(const t of a)t(e);return t}:e=>{for(const t of a)t(e);return t}}default:{if(void 0===e.dataBuffer)throw new Error("malformed data view, expected data buffer for argument of type: "+e.physicalType);const r=B(t,f[e.dataBuffer],e.physicalType,c.rows);return null!=n?e=>n[e]?r[e]:null:e=>r[e]}}},h=[];for(let e=0;e<c.args.length;++e)h.push(d(c.args[e]));const _=c.rows*O(c.ret.physicalType),p=t._malloc(_),b=B(t,p,c.ret.physicalType,c.rows),g=t._malloc(c.rows),m=x(t,g,c.rows);if(0==b.length||0==m.length)return void C(t,r,"Can't create physical arrays for result");let y=b;"VARCHAR"==c.ret.physicalType&&(y=new Array(c.rows));const w=[];for(let e=0;e<c.args.length;++e)w.push(null);for(let e=0;e<c.rows;++e){for(let t=0;t<c.args.length;++t)w[t]=h[t](e);const t=l.func(...w);y[e]=t,m[e]=null==t?0:1}let v=0;if("VARCHAR"===c.ret.physicalType){const e=new Array(0);v=t._malloc(c.rows*O("DOUBLE"));const r=W(t,v,c.rows);let n=0;for(let t=0;t<c.rows;++t){const a=N.encode(y[t]||"");e.push(a),r[t]=a.length,n+=a.length}const a=t._malloc(n),o=t.HEAPU8.subarray(a,a+n);let s=0;for(let t=0;t<c.rows;++t){b[t]=s;const r=e[t];o.subarray(s,s+r.length).set(r),s+=r.length}}const A=24,k=t._malloc(A),E=W(t,k,3);E[0]=p,E[1]=g,E[2]=v,t.HEAPF64[0+(r>>3)]=0,t.HEAPF64[1+(r>>3)]=k,t.HEAPF64[2+(r>>3)]=0}catch(e){C(t,r,e.toString())}}(G,e,t,r,n,a,o,s)}};globalThis.DUCKDB_RUNTIME={};for(const e of Object.getOwnPropertyNames(G))"constructor"!=e&&(globalThis.DUCKDB_RUNTIME[e]=Object.getOwnPropertyDescriptor(G,e).value);globalThis.onmessage=e=>{if("load"===e.data.cmd){let t=A;globalThis.startWorker=e=>{t=e,postMessage({cmd:"loaded"})},t.wasmModule=e.data.wasmModule,t.wasmMemory=e.data.wasmMemory,t.buffer=t.wasmMemory.buffer,t.ENVIRONMENT_IS_PTHREAD=!0,(0,M.default)(t).then((e=>{!function(e){A=e}(e)}))}else if("registerFileHandle"===e.data.cmd)globalThis.DUCKDB_RUNTIME._files=globalThis.DUCKDB_RUNTIME._files||new Map,globalThis.DUCKDB_RUNTIME._files.set(e.data.fileName,e.data.fileHandle);else if("dropFileHandle"===e.data.cmd)globalThis.DUCKDB_RUNTIME._files=globalThis.DUCKDB_RUNTIME._files||new Map,globalThis.DUCKDB_RUNTIME._files.delete(e.data.fileName);else if("registerUDFFunction"===e.data.cmd)globalThis.DUCKDB_RUNTIME._udfFunctions=globalThis.DUCKDB_RUNTIME._files||new Map,globalThis.DUCKDB_RUNTIME._udfFunctions.set(e.data.udf.name,e.data.udf);else if("dropUDFFunctions"===e.data.cmd){globalThis.DUCKDB_RUNTIME._udfFunctions=globalThis.DUCKDB_RUNTIME._files||new Map;for(const t of globalThis.DUCKDB_RUNTIME._udfFunctions.keys())globalThis.DUCKDB_RUNTIME._udfFunctions.get(t).connection_id==e.data.connectionId&&globalThis.DUCKDB_RUNTIME._udfFunctions.delete(t)}else U(e)}})();